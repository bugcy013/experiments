---

modules:

  amqp:
    module: wishbone.input.amqp
    arguments:
        host: rabbitmq
        queue: logstash
        prefetch_count: 1
        no_ack: true

  json:
    module: wishbone.function.json
    arguments:
      mode: decode

  pyseps:
    module: pyseps.mapmatch
    arguments:
      location: rules/

  stdout_events:
    module: wishbone.builtin.output.stdout
    arguments:
      complete: true

routingtable:

#organize event stream
  - amqp.outbox     -> json.inbox
  - json.outbox     -> pyseps.inbox
  - pyseps.stdout   -> stdout_events.inbox
...
