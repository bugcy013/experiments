---
modules:
  httprequest_one:
    module: wishbone.input.httprequest
    arguments:
      url: "http://elasticsearch-node-001:9200/_cluster/stats"
      interval: 1

  httprequest_two:
    module: wishbone.input.httprequest
    arguments:
      url: "http://elasticsearch-node-001:9200/_nodes/stats"
      interval: 1

  httprequest_three:
    module: wishbone.input.httprequest
    arguments:
      url: "http://elasticsearch-node-001:9200/_stats"
      interval: 1

  funnel:
    module: wishbone.builtin.flow.funnel

  decode:
    module: metricfactory.decoder.elasticsearch
    arguments:
      source: mycluster

  encode:
    module: wishbone.builtin.metrics.graphite
    arguments:
      prefix: application.elasticsearch.
      script: false

  output_screen:
    module: wishbone.builtin.output.stdout

  output_tcp:
    module: wishbone.output.tcp
    arguments:
      host: localhost
      port: 2013

routingtable:
  #organize event stream
  - httprequest_one.outbox   -> funnel.one
  - httprequest_two.outbox   -> funnel.two
  - httprequest_three.outbox -> funnel.three
  - funnel.outbox            -> decode.inbox
  - decode.outbox            -> encode.inbox
  - encode.outbox            -> output_tcp.inbox
...
